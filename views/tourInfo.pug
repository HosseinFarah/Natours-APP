extends base

block content
    style.
        p.hidden {
            visibility: hidden;
        }
        .form__tour-photo {
            width: 150px;
            height: 150px;
            object-fit: cover;
        }
    .container
        a.btn.btn--white(href='/manage-tours') All Tours
        .tour-info
            p#tourId.hidden= tour._id
            form.form.form-tour-info(action=`/tours/${tour._id}`, method='POST' enctype='multipart/form-data')
                .form-group
                    img.form__tour-photo(src=`/img/tours/${tour.imageCover}`, alt=`${tour.name}`)
                    input#imageCover.form__upload(type="file" name="imageCover" accept='image/*')
                    label(for='imageCover') Choose new cover image

                .form-group
                    label.form__label(for='images') Additional Images:
                    each image, index in tour.images
                        .form-group(key=index)
                            img.form__tour-photo(src=`/img/tours/${image}`, alt=`Image ${index + 1}`)
                            input.form__upload(type="file" name=`images[${index}]` accept='image/*')
                            label(for=`images[${index}]`) Choose image ${index + 1}

                .form-group
                    label.form__label(for='name') Name:
                    input.form__input#name(type='text' name='name' value=tour.name)
                
                .form-group
                    label.form__label(for='duration') Duration (days):
                    input.form__input#duration(type='number' name='duration' value=tour.duration)
                
                .form-group
                    label.form__label(for='maxGroupSize') Max Group Size:
                    input.form__input#maxGroupSize(type='number' name='maxGroupSize' value=tour.maxGroupSize)
                
                .form-group
                    label.form__label(for='difficulty') Difficulty:
                    select.form__input#difficulty(name='difficulty' required)
                        option(value='easy', selected=tour.difficulty==='easy') Easy
                        option(value='medium', selected=tour.difficulty==='medium') Medium
                        option(value='difficult', selected=tour.difficulty==='difficult') Difficult
                
                .form-group
                    label.form__label(for='price') Price:
                    input.form__input#price(type='number' name='price' value=tour.price)
                
                .form-group
                    label.form__label(for='summary') Summary:
                    textarea.form__textarea#summary(name='summary' rows='5')= tour.summary
                
                .form-group
                    label.form__label(for='description') Description:
                    textarea.form__textarea#description(name='description' rows='10')= tour.description
                
                .form-group
                    label.form__label(for='startDates') Start Dates:
                    each date in tour.startDates
                        input.form__input(type='date' name='startDates' value=date.toISOString().split('T')[0])
                
                .form-group
                    label.form__label(for='startLocation.description') Start Location Description:
                    input.form__input#startLocationDescription(type='text' name='startLocation.description' value=tour.startLocation.description)
                
                .form-group
                    label.form__label(for='startLocation.coordinates') Start Location Coordinates:
                    input.form__input#startLocationCoordinates(type='text' name='startLocation.coordinates' value=tour.startLocation.coordinates.join(', '))
                
                .form-group
                    label.form__label(for='startLocation.address') Start Location Address:
                    input.form__input#startLocationAddress(type='text' name='startLocation.address' value=tour.startLocation.address)
                
                .form-group
                    each location, index in tour.locations
                        .location(key=index)
                            label.form__label(for=`locations[${index}].description`) Location Description:
                            input.form__input#locationDescription(type='text' name=`locations[${index}].description` value=location.description)
                            
                            label.form__label(for=`locations[${index}].coordinates`) Location Coordinates:
                            input.form__input#locationCoordinates(type='text' name=`locations[${index}].coordinates` value=location.coordinates.join(', '))
                            
                            label.form__label(for=`locations[${index}].day`) Day:
                            input.form__input#locationDay(type='number' name=`locations[${index}].day` value=location.day)
                
                .btn-group
                    button.btn.btn--green(type='submit') Save
                    a.btn.btn--white(href='/manage-tours') Cancel
